{#
SPDX-FileCopyrightText: 2022 - 2024 Slavi Pantaleev
SPDX-FileCopyrightText: 2023 Julian-Samuel Geb√ºhr
SPDX-FileCopyrightText: 2024 Sergio Durigan Junior

SPDX-License-Identifier: AGPL-3.0-or-later
#}

TZ={{ woodpecker_ci_server_environment_variables_tz }}

WOODPECKER_HOST={{ woodpecker_ci_server_config_host }}{{ woodpecker_ci_server_config_root_url }}

WOODPECKER_OPEN={{ woodpecker_ci_server_config_open | to_json }}

WOODPECKER_SERVER_ADDR={{ woodpecker_ci_server_config_server_addr }}
WOODPECKER_GRPC_ADDR={{ woodpecker_ci_server_config_grpc_addr }}

WOODPECKER_ADMIN={{ woodpecker_ci_server_config_admin }}

WOODPECKER_AGENT_SECRET={{ woodpecker_ci_server_config_agent_secret }}

{% if woodpecker_ci_server_provider == 'gitea' %}
WOODPECKER_GITEA=true
WOODPECKER_GITEA_URL={{ woodpecker_ci_server_config_gitea_url }}
WOODPECKER_GITEA_CLIENT={{ woodpecker_ci_server_config_gitea_client }}
WOODPECKER_GITEA_SECRET={{ woodpecker_ci_server_config_gitea_secret }}
WOODPECKER_GITEA_SKIP_VERIFY={{ woodpecker_ci_server_config_gitea_skip_verify | to_json }}
{% endif %}

{% if woodpecker_ci_server_provider == 'forgejo' %}
WOODPECKER_FORGEJO=true
WOODPECKER_FORGEJO_URL={{ woodpecker_ci_server_config_forgejo_url }}
WOODPECKER_FORGEJO_CLIENT={{ woodpecker_ci_server_config_forgejo_client }}
WOODPECKER_FORGEJO_SECRET={{ woodpecker_ci_server_config_forgejo_secret }}
WOODPECKER_FORGEJO_SKIP_VERIFY={{ woodpecker_ci_server_config_forgejo_skip_verify | to_json }}
{% endif %}

{% if woodpecker_ci_server_provider == 'github' %}
WOODPECKER_GITHUB=true
WOODPECKER_GITHUB_URL={{ woodpecker_ci_server_config_github_url }}
WOODPECKER_GITHUB_CLIENT={{ woodpecker_ci_server_config_github_client }}
WOODPECKER_GITHUB_SECRET={{ woodpecker_ci_server_config_github_secret }}
WOODPECKER_GITHUB_SKIP_VERIFY={{ woodpecker_ci_server_config_github_skip_verify | to_json }}
{% endif %}

WOODPECKER_PLUGINS_PRIVILEGED={{ woodpecker_ci_server_config_plugins_privileged }}

WOODPECKER_DATABASE_DRIVER={{ woodpecker_ci_server_database_type }}

{% if woodpecker_ci_server_database_type == 'mysql' %}
WOODPECKER_DATABASE_DATASOURCE={{ woodpecker_ci_server_database_datasource_mysql }}
{% elif woodpecker_ci_server_database_type == 'postgres' %}
WOODPECKER_DATABASE_DATASOURCE={{ woodpecker_ci_server_database_datasource_postgres }}
{% else %}
WOODPECKER_DATABASE_DATASOURCE={{ woodpecker_ci_server_database_datasource_sqlite }}
{% endif %}

WOODPECKER_LOG_LEVEL={{ woodpecker_ci_server_config_log_level }}

{{ woodpecker_ci_server_environment_variables_additional_variables }}
